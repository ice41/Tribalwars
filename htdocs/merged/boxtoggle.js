function MapToggleBox(n){var i=$.extend({visible:!1,url:null,onShow:null,onHide:null},n);n=i;var o=this,e=i.id,t=i.visible,l=!1,u=i.url,s=$(document.getElementById(e)),h=$("."+e+"_wrap"),a=$("."+e+"_toggler");function c(){var n=TWMap.image_base+"/icons/slide_"+(t?"up":"down")+".png";a.attr("src",n)}function d(){null!==i.onShow&&i.onShow(),t=!0,c(),s.show("fast")}function r(n){l&&(l=!1,s.html(n),d())}this.show=function(){u?(l=!0,$.ajax({url:u,dataType:"html",success:r})):d()},this.hide=function(){!function(){null!==i.onHide&&i.onHide();t=!1,l=!1,c(),s.hide("fast")}()},t||(h.hide(),s.hide()),a.click(function(){return t?o.hide():o.show(),!1}),c()}